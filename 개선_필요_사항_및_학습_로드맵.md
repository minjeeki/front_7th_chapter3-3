# 개선 필요 사항 및 학습 로드맵

## 📋 목차
1. [현재 코드의 문제점](#현재-코드의-문제점)
2. [부족한 부분](#부족한-부분)
3. [학습이 필요한 영역](#학습이-필요한-영역)
4. [우선순위별 개선 계획](#우선순위별-개선-계획)

---

## 현재 코드의 문제점

### 1. 🔴 **이중 상태 관리 구조 (중요)**

**문제점:**
- `app/stores/postsStore.ts`와 `features/post/model/`에 로직이 중복되어 있음
- `features/post/model/usePostsManager.ts`가 있지만 실제로는 사용되지 않음
- `pages/PostsManagerPage.tsx`에서 직접 `postsStore`를 사용하고 있어 FSD 원칙 위반

**현재 상황:**
```typescript
// pages/PostsManagerPage.tsx - 직접 스토어 사용
const postsStore = usePostsStore()  // ❌ pages 레이어가 너무 두꺼움

// features/post/model/usePostsManager.ts - 만들어놨지만 사용 안 함
export const usePostsManager = () => { ... }  // ❌ 미사용
```

**개선 방향:**
- `pages` 레이어는 `features`의 훅만 사용해야 함
- 전역 상태(`app/stores`)는 최소한으로 유지
- 비즈니스 로직은 `features/*/model/`로 이동

---

### 2. 🔴 **에러 처리 부족 (중요)**

**문제점:**
- 모든 API 호출에서 `console.error`만 사용
- 사용자에게 에러를 보여주는 UI가 없음
- 에러 상태 관리가 없음

**현재 코드:**
```typescript
// postsStore.ts
catch (error) {
  console.error('게시물 가져오기 오류:', error)  // ❌ 사용자에게 보이지 않음
}
```

**개선 필요:**
- 에러 상태를 스토어에 추가
- 에러 토스트/알림 UI 컴포넌트 추가
- 에러 타입별 처리 (네트워크 에러, 404, 500 등)

---

### 3. 🟡 **React Hooks 최적화 부족**

**문제점:**
- `useCallback`, `useMemo` 사용이 거의 없음
- 불필요한 리렌더링 발생 가능
- 인라인 함수가 많음

**현재 코드:**
```typescript
// PostsManagerPage.tsx
onEditClick={(post) => {  // ❌ 매번 새로운 함수 생성
  postsStore.setSelectedPost(post)
  postsStore.setShowEditDialog(true)
}}
```

**개선 필요:**
- 핸들러 함수를 `useCallback`으로 메모이제이션
- 계산된 값은 `useMemo`로 메모이제이션
- 컴포넌트 props 안정성 확보

---

### 4. 🟡 **중복 코드**

**문제점:**
- `postsStore.ts`에서 사용자 데이터를 매번 가져오는 로직이 반복됨
- 게시물과 사용자 데이터 결합 로직이 여러 곳에 중복

**현재 코드:**
```typescript
// postsStore.ts - fetchPosts, searchPosts, fetchPostsByTag 모두 동일한 로직
const [postsData, usersData] = await Promise.all([...])
const postsWithUsers = postsData.posts.map((post) => {
  const user = usersData.users.find((user) => user.id === post.userId)
  // ... 동일한 매핑 로직
})
```

**개선 필요:**
- 공통 로직을 `shared/lib/` 또는 `entities/post/lib/`로 추출
- 헬퍼 함수로 분리

---

### 5. 🟡 **타입 안정성 개선 필요**

**문제점:**
- 일부 타입이 명시적이지 않음
- `any` 타입 사용 가능성
- 타입 가드 부족

**개선 필요:**
- 모든 함수의 반환 타입 명시
- 타입 가드 함수 추가
- 런타임 타입 검증 (zod 등)

---

### 6. 🟡 **테스트 코드 부재**

**문제점:**
- `vitest` 설정은 있지만 실제 테스트 코드가 없음
- `@testing-library/react` 설치되어 있지만 미사용

**개선 필요:**
- 단위 테스트 작성 (커스텀 훅, 유틸리티 함수)
- 컴포넌트 테스트 작성
- 통합 테스트 작성

---

### 7. 🟢 **TanStack Query 미적용**

**문제점:**
- README에 심화과제로 나와있지만 아직 적용되지 않음
- 서버 상태 관리가 Zustand로만 처리됨

**개선 필요:**
- TanStack Query로 서버 상태 관리 전환
- 캐싱, 리프레시 전략 구현
- 낙관적 업데이트 적용

---

### 8. 🟢 **로딩 상태 관리 개선**

**문제점:**
- 로딩 상태가 단순 boolean
- 여러 비동기 작업의 로딩 상태를 구분하지 못함

**개선 필요:**
- 로딩 상태를 객체로 관리 (예: `{ fetching: boolean, creating: boolean }`)
- 또는 각 작업별 로딩 상태 분리

---

## 부족한 부분

### 1. **FSD 아키텍처 완전한 이해**

**현재 상태:**
- 기본적인 레이어 구조는 이해하고 있음
- 하지만 실제 적용에서 일부 원칙을 위반하고 있음

**부족한 점:**
- 레이어 간 의존성 규칙을 완전히 준수하지 못함
- `pages` 레이어가 너무 두꺼움 (직접 스토어 사용)
- `features`와 `widgets`의 경계가 모호함

**학습 필요:**
- FSD 공식 문서 심화 학습
- 실제 프로젝트에서 FSD 적용 사례 연구
- 레이어 간 통신 패턴 이해

---

### 2. **상태 관리 전략**

**현재 상태:**
- Zustand 사용은 하고 있음
- 하지만 전역 상태와 로컬 상태의 경계가 모호함

**부족한 점:**
- 언제 전역 상태를 써야 하는지 판단 기준 부족
- 서버 상태와 클라이언트 상태의 구분이 명확하지 않음
- 상태 관리 라이브러리 선택 기준 부족

**학습 필요:**
- 서버 상태 vs 클라이언트 상태 이해
- TanStack Query 학습 (서버 상태 관리)
- 상태 관리 라이브러리 비교 (Zustand, Jotai, Redux Toolkit)

---

### 3. **에러 처리 및 사용자 경험**

**현재 상태:**
- 기본적인 에러 처리만 있음
- 사용자에게 에러를 보여주는 UI가 없음

**부족한 점:**
- 에러 바운더리 미사용
- 에러 타입별 처리 전략 부족
- 사용자 친화적인 에러 메시지 작성 능력

**학습 필요:**
- React Error Boundary
- 에러 처리 패턴 및 전략
- 사용자 경험(UX) 관점에서의 에러 처리

---

### 4. **성능 최적화**

**현재 상태:**
- 기본적인 React 사용은 하고 있음
- 하지만 성능 최적화는 거의 하지 않음

**부족한 점:**
- `useCallback`, `useMemo` 사용법 미숙
- 리렌더링 최적화 전략 부족
- 코드 스플리팅, 레이지 로딩 미적용

**학습 필요:**
- React 성능 최적화 기법
- React DevTools Profiler 사용법
- 번들 크기 최적화

---

### 5. **테스트 작성 능력**

**현재 상태:**
- 테스트 설정은 되어 있음
- 하지만 실제 테스트 코드 작성 경험이 없음

**부족한 점:**
- 테스트 작성 방법 미숙
- 테스트 커버리지 개념 부족
- TDD(Test-Driven Development) 경험 부족

**학습 필요:**
- Vitest 사용법
- React Testing Library 사용법
- 테스트 작성 전략 및 패턴

---

### 6. **TypeScript 고급 활용**

**현재 상태:**
- 기본적인 TypeScript 사용은 하고 있음
- 타입 정의는 하고 있음

**부족한 점:**
- 제네릭 활용 부족
- 유틸리티 타입 활용 부족
- 타입 가드, 타입 단언 사용 미숙

**학습 필요:**
- TypeScript 고급 타입
- 타입 안전성 강화 기법
- 런타임 타입 검증 (zod, yup 등)

---

## 학습이 필요한 영역

### 🔥 **우선순위 높음 (즉시 학습 필요)**

#### 1. **TanStack Query (React Query)**
- **이유**: 서버 상태 관리를 위한 필수 라이브러리
- **학습 내용**:
  - `useQuery`, `useMutation` 사용법
  - 쿼리 키 관리
  - 캐싱 전략
  - 낙관적 업데이트
  - 에러 처리 및 리트라이
- **실습**: 현재 프로젝트에 TanStack Query 적용

#### 2. **에러 처리 패턴**
- **이유**: 사용자 경험과 안정성에 직접적인 영향
- **학습 내용**:
  - React Error Boundary
  - 에러 상태 관리
  - 에러 토스트/알림 UI
  - 에러 타입별 처리
- **실습**: 에러 처리 시스템 구축

#### 3. **React Hooks 최적화**
- **이유**: 성능 개선에 직접적인 영향
- **학습 내용**:
  - `useCallback` 사용법 및 언제 사용해야 하는지
  - `useMemo` 사용법 및 언제 사용해야 하는지
  - 불필요한 리렌더링 방지
- **실습**: 현재 코드에 최적화 적용

---

### ⚡ **우선순위 중간 (단기간 내 학습)**

#### 4. **FSD 아키텍처 심화**
- **학습 내용**:
  - FSD 공식 문서 완독
  - 레이어 간 통신 패턴
  - 실제 프로젝트 적용 사례
- **실습**: 현재 프로젝트 구조 개선

#### 5. **테스트 작성**
- **학습 내용**:
  - Vitest 기본 사용법
  - React Testing Library 사용법
  - 커스텀 훅 테스트
  - 컴포넌트 테스트
- **실습**: 핵심 기능에 대한 테스트 작성

#### 6. **TypeScript 고급 활용**
- **학습 내용**:
  - 제네릭 활용
  - 유틸리티 타입 (Pick, Omit, Partial 등)
  - 타입 가드
  - 조건부 타입
- **실습**: 타입 안정성 강화

---

### 📚 **우선순위 낮음 (장기 학습)**

#### 7. **성능 최적화 고급 기법**
- 코드 스플리팅
- 레이지 로딩
- 가상화 (Virtualization)
- 번들 크기 최적화

#### 8. **디자인 패턴**
- 컴포넌트 디자인 패턴
- 상태 관리 패턴
- 비동기 처리 패턴

#### 9. **접근성 (a11y)**
- ARIA 속성
- 키보드 네비게이션
- 스크린 리더 지원

---

## 우선순위별 개선 계획

### 📅 **1주차: 즉시 개선 (Critical)**

1. **에러 처리 시스템 구축**
   - 에러 상태를 스토어에 추가
   - 에러 토스트 컴포넌트 생성 (`shared/ui/toast/`)
   - 모든 API 호출에 에러 처리 추가

2. **React Hooks 최적화**
   - 핸들러 함수를 `useCallback`으로 메모이제이션
   - 계산된 값은 `useMemo`로 메모이제이션
   - 불필요한 리렌더링 제거

3. **중복 코드 제거**
   - 게시물-사용자 데이터 결합 로직을 헬퍼 함수로 추출
   - 공통 로직을 `shared/lib/`로 이동

---

### 📅 **2-3주차: 단기 개선 (High Priority)**

4. **FSD 구조 개선**
   - `pages/PostsManagerPage.tsx`에서 직접 스토어 사용 제거
   - `features/post/model/usePostsManager.ts` 활용
   - 레이어 간 의존성 규칙 준수

5. **TanStack Query 도입**
   - TanStack Query 설치 및 설정
   - 서버 상태를 TanStack Query로 전환
   - 캐싱 및 리프레시 전략 구현

6. **타입 안정성 강화**
   - 모든 함수의 반환 타입 명시
   - 타입 가드 함수 추가
   - `any` 타입 제거

---

### 📅 **4주차 이후: 중장기 개선 (Medium Priority)**

7. **테스트 코드 작성**
   - 핵심 커스텀 훅 테스트
   - 유틸리티 함수 테스트
   - 컴포넌트 테스트

8. **성능 최적화**
   - 코드 스플리팅 적용
   - 레이지 로딩 적용
   - 번들 크기 분석 및 최적화

9. **문서화**
   - API 문서 작성
   - 컴포넌트 스토리북 작성
   - 개발 가이드라인 문서화

---

## 학습 리소스 추천

### 📖 **공식 문서**
- [FSD 공식 문서](https://feature-sliced.design/)
- [TanStack Query 공식 문서](https://tanstack.com/query/latest)
- [React 공식 문서 - 성능 최적화](https://react.dev/learn/render-and-commit)
- [TypeScript 핸드북](https://www.typescriptlang.org/docs/handbook/intro.html)

### 🎥 **추천 강의/튜토리얼**
- TanStack Query 튜토리얼
- React 성능 최적화 강의
- TypeScript 고급 타입 강의

### 📚 **추천 도서**
- "리팩토링" - 마틴 파울러
- "클린 코드" - 로버트 C. 마틴
- "이펙티브 타입스크립트" - 댄 밴더캄

---

## 체크리스트

### 즉시 개선 (1주차)
- [ ] 에러 처리 시스템 구축
- [ ] React Hooks 최적화 (`useCallback`, `useMemo`)
- [ ] 중복 코드 제거

### 단기 개선 (2-3주차)
- [ ] FSD 구조 개선 (pages 레이어 얇게 만들기)
- [ ] TanStack Query 도입
- [ ] 타입 안정성 강화

### 중장기 개선 (4주차 이후)
- [ ] 테스트 코드 작성
- [ ] 성능 최적화
- [ ] 문서화

---

## 결론

현재 프로젝트는 **FSD 구조와 단일 책임 원칙의 기본은 이해하고 있지만**, 실제 적용에서 몇 가지 개선이 필요합니다. 특히:

1. **에러 처리**와 **React Hooks 최적화**는 즉시 개선이 필요합니다.
2. **TanStack Query 도입**은 서버 상태 관리를 개선하는 핵심입니다.
3. **FSD 구조 완전한 준수**는 장기적인 유지보수성을 위해 중요합니다.

단계적으로 개선해 나가면 더욱 견고하고 유지보수하기 쉬운 코드베이스를 만들 수 있을 것입니다.
